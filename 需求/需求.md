# ERP 專案需求與規格文檔 (Requirement Specification)

## 1. 專案概覽 (Project Overview)
本專案旨在開發一套現代化的企業資源規劃 (ERP) 系統，整合企業核心業務流程，提升營運效率。系統將採用前後端分離架構，確保擴充性與維護性。

**UI 風格**: 簡潔白色系為主，強調資訊清晰度與操作直覺性。

## 2. 系統架構 (System Architecture)

### 2.1 技術棧 (Technology Stack)
- **前端 (Frontend)**: 
  - 框架: React (Vite) + TypeScript
  - 樣式: CSS Modules (Vanilla CSS) + CSS Variables (Theme)
  - 狀態: Zustand (Client) + TanStack Query (Server)
- **後端 (Backend)**: 
  - 框架: NestJS (Node.js) + TypeScript
  - API: RESTful API
- **資料庫 (Database)**: 
  - 資料庫: PostgreSQL
  - ORM: Prisma
  - 快取: Redis
- **基礎設施**: Docker (Containerization)

### 2.2 目錄結構 (Directory Structure)
```mermaid
graph TD
    Root[ERP Project Root] --> Frontend[frontend/]
    Root --> Backend[backend/]
    Root --> Docs[doc/]
    Root --> Devlog[devlog/]
    Root --> Docker[docker/]
    
    Frontend --> F_Src[src]
    F_Src --> F_Pages[pages]
    F_Pages --> P_Login[Login]
    F_Pages --> P_Dashboard[Dashboard]
    F_Src --> F_Comps[components]
    F_Comps --> C_UI[ui (Button, Input)]
    F_Comps --> C_Layout[layouts]
    
    Backend --> B_Src[src]
    B_Src --> B_Modules[modules]
    B_Modules --> M_Auth[auth]
    B_Modules --> M_Inventory[inventory]
    B_Modules --> M_Finance[finance]
    B_Src --> B_Prisma[prisma (schema)]
    
    Docker --> D_Local[local]
    Docker --> D_Server[server]
```

## 3. 功能模組詳細規格 (Module Specifications)

### 3.1 帳號與權限管理 (Account & Permission)
- **核心功能**:
  - 用戶登入/登出 (JWT Authentication)
  - 用戶個人資料管理 (大頭貼、聯絡資訊)
  - 角色管理 (RBAC): Admin, Manager, Staff
  - 權限設定: 配置角色可訪問的頁面與功能按鈕

### 3.2 倉儲管理 (Inventory Management)
- **核心功能**:
  - **商品管理**: SKU 建立、分類管理、單位設定、安全庫存設定。
  - **庫存異動**: 入庫 (採購/退貨)、出庫 (銷售/領用)、庫存調撥 (倉庫間移動)。
  - **庫存盤點**: 定期盤點單、差異調整。
  - **即時庫存**: 多維度查詢 (依倉庫、分類、關鍵字)。

### 3.3 財務管理 (Finance Management)
- **核心功能**:
  - **收支管理**: 收入單、支出單、憑證上傳。
  - **會計科目**: 自定義科目層級 (資產、負債、權益、損益)。
  - **財務報表**: 
    - 損益表 (Income Statement)
    - 資產負債表 (Balance Sheet) (預計)
    - 現金流量表 (詳情待定)

### 3.4 任務管理 (Task Management)
- **核心功能**:
  - **看板視圖 (Kanban)**: 類似 Trello 的拖拉介面。
  - **任務屬性**: 標題、描述、指派人、截止日、優先級、標籤。
  - **協作**: 任務內留言、附件上傳。

### 3.5 即時通訊 (Instant Messaging)
- **核心功能**:
  - **即時聊天**: WebSocket 實時傳訊。
  - **群組**: 部門群組、專案群組、全公司公告。
  - **狀態**: 在線/離線狀態顯示。

## 4. UI/UX 設計規範 (Design Guidelines)
- **色調 (Color Palette)**:
  - 主色 (Primary): 品牌藍/深藍 (待定，建議配合白色系)
  - 背景 (Background): `#FFFFFF` (純白), `#F3F4F6` (淺灰底)
  - 文字 (Text): `#111827` (深灰黑), `#6B7280` (次要灰)
  - 邊框 (Border): `#E5E7EB` (極淺灰)
- **佈局 (Layout)**:
  - 側邊欄 (Sidebar): 固定左側，深色或淺色模式可切換。
  - 頂部導航 (Top Bar): 搜尋、通知、個人選單。
  - 內容區 (Content): 卡片式設計 (Card)，白色背景 + 陰影。

## 5. 開發環境與部署 (Environment & Deployment)
- **本地開發**:
  - 前端: `npm run dev` (Vite Server: 5173)
  - 後端: `npm run start:dev` (NestJS Server: 3000)
  - 資料庫: Docker Compose 啟動 PostgreSQL (5432) + Redis (6379)
- **部署策略**: TBD (待定，建議 Docker Image 部署)
